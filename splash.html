<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ancia</title>
    <style>
      :root {
        color-scheme: dark;
      }

      * {
        box-sizing: border-box;
      }

      html,
      body {
        margin: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        background: rgb(5 8 22 / 0.04);
        color: rgb(236 254 255 / 0.95);
        border-radius: 10px;
      }

      .window-shell {
        width: 100%;
        height: 100%;
        margin: 0;
        border-radius: inherit;
        overflow: hidden;
        background:
          radial-gradient(circle at 20% 20%, rgb(56 189 248 / 0.18) 0%, transparent 44%),
          radial-gradient(circle at 80% 80%, rgb(16 185 129 / 0.12) 0%, transparent 40%),
          #050816;
      }

      .splash {
        width: 100%;
        height: 100%;
        display: grid;
        place-items: center;
      }

      .card {
        width: min(300px, calc(100vw - 44px));
        border-radius: 28px;
        padding: 22px 24px;
        text-align: center;
      }
      
      .logo-wrap {
        width: 128px;
        height: 128px;
        margin: 0 auto 14px;
        border-radius: 24px;
        display: grid;
        place-items: center;
      }

      .logo {
        width: 128px;
        height: 128px;
        object-fit: cover;
        border-radius: 16px;
      }

      .label {
        margin: 0;
        font-size: 14px;
        font-weight: 600;
        letter-spacing: 0.04em;
        color: rgb(224 242 254 / 0.95);
      }
    </style>
  </head>
  <body>
    <div class="window-shell">
      <main class="splash" aria-live="polite">
        <section class="card">
          <div class="logo-wrap">
            <img src="/ancia.png" alt="Ancia" class="logo" data-seasonal-logo />
          </div>
          <p class="label" data-seasonal-greeting>Запуск...</p>
        </section>
      </main>
    </div>
    <script>
      (() => {
        const holidays = [
          { month: 2, day: 23, logo: "/23_feb_outline.png", greeting: "Защищаем Отечество!" },
          { month: 3, day: 8, logo: "/8march_outline.png", greeting: "С 8 марта!" },
          { month: 5, day: 9, logo: "/9may_outline.png", greeting: "Помним победу!" },
          { month: 12, day: 25, logo: "/xmas_ny_outline.png", greeting: "С Новым годом!" },
          { month: 1, day: 1, logo: "/xmas_ny_outline.png", greeting: "С Новым годом!" },
          { month: 1, day: 7, logo: "/xmas_ny_outline.png", greeting: "С Новым годом!" },
        ];
        const dayMs = 24 * 60 * 60 * 1000;
        const now = new Date();
        const stampNow = Date.UTC(now.getFullYear(), now.getMonth(), now.getDate());

        const resolveSeasonalState = () => {
          const year = now.getFullYear();
          for (const holiday of holidays) {
            for (const candidateYear of [year - 1, year, year + 1]) {
              const stampHoliday = Date.UTC(candidateYear, holiday.month - 1, holiday.day);
              const diff = Math.round((stampNow - stampHoliday) / dayMs);
              if (Math.abs(diff) <= 1) {
                return {
                  logo: holiday.logo,
                  greeting: holiday.greeting,
                };
              }
            }
          }
          return {
            logo: "/ancia.png",
            greeting: "Запуск...",
          };
        };

        const seasonalState = resolveSeasonalState();
        document.querySelectorAll("img[data-seasonal-logo]").forEach((node) => {
          if (node instanceof HTMLImageElement) {
            node.src = seasonalState.logo;
          }
        });
        document.querySelectorAll("[data-seasonal-greeting]").forEach((node) => {
          if (node instanceof HTMLElement) {
            node.textContent = seasonalState.greeting;
          }
        });
      })();
    </script>
  </body>
</html>
