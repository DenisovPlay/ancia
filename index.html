<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ancia Local</title>
    <style>
      html,
      body {
        margin: 0;
        width: 100%;
        height: 100%;
        background: #0f0a1c;
        color-scheme: dark;
      }

      body {
        overflow: hidden;
        color: #000000;
      }

      #app-preloader {
        position: fixed;
        inset: 2.5rem 0 0;
        z-index: 9999;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 10px;
        background: radial-gradient(circle at 50% 36%, rgb(91 33 182 / 0.24) 0%, transparent 42%), #090512;
        opacity: 1;
        visibility: visible;
        transition: opacity 220ms ease, visibility 220ms ease;
      }

      body.app-ready #app-preloader {
        opacity: 0;
        visibility: hidden;
        pointer-events: none;
      }

      #app-preloader .app-preloader__orb {
        width: 34px;
        height: 34px;
        border-radius: 999px;
        border: 2px solid rgb(212 212 216 / 0.14);
        border-top-color: rgb(244 244 245 / 0.9);
        border-right-color: rgb(168 85 247 / 0.7);
        animation: critical-loader-spin 760ms linear infinite;
      }

      #app-preloader .app-preloader__label {
        margin: 0;
        font-size: 11px;
        letter-spacing: 0.09em;
        color: rgb(212 212 216 / 0.82);
      }

      @keyframes critical-loader-spin {
        to {
          transform: rotate(360deg);
        }
      }
    </style>
  </head>
  <body class="min-h-screen bg-violet-950 text-zinc-100 antialiased">
    <canvas id="liquid-canvas" aria-hidden="true"></canvas>
    <div class="noise-layer" aria-hidden="true"></div>
    <div id="app-preloader" class="app-preloader" aria-live="polite">
      <div class="app-preloader__orb" aria-hidden="true"></div>
      <p class="app-preloader__label">Загрузка интерфейса...</p>
    </div>

    <div class="relative h-screen overflow-hidden">
      <header id="titlebar" data-tauri-drag-region class="glass-panel !bg-zinc-500/20 border-b border-zinc-600/30 drag-region mx-auto flex h-10 w-full max-w-[1780px] items-center px-3">
        <div class="titlebar-left flex min-w-0 items-center">
          <div class="min-w-0">
            <p class="truncate text-[11px] uppercase tracking-[0.16em] text-zinc-400">Ancia Local</p>
          </div>
        </div>
      </header>

      <div class="mx-auto grid h-[calc(100vh-2.5rem)] w-full max-w-[1780px] grid-cols-[78px_minmax(0,1fr)] divide-x divide-zinc-600/30">
        <nav class="glass-panel !border-l-0 !border-b-0 flex flex-col items-center gap-1.5 py-3 px-1.5" aria-label="Основная навигация">
          <!--Чаты-->
          <button id="nav-go-chat" type="button" data-route-target="chat" data-active="true" aria-label="Чаты" title="Чаты" class="route-icon no-drag active:scale-95 flex flex-col items-center justify-center gap-1 w-14 h-14 py-2.5 rounded-3xl transition border border-zinc-600/30">
            <span class="sr-only">Чаты</span>
          </button>
          <!--Модели-->
          <button id="nav-go-models" type="button" data-route-target="models" data-active="false" aria-label="Модели" title="Модели" class="route-icon no-drag active:scale-95 flex flex-col items-center justify-center gap-1 w-14 h-14 rounded-3xl transition border border-zinc-600/30">
            <span class="sr-only">Модели</span>
          </button>
          <!--Плагины-->
          <button id="nav-go-plugins" type="button" data-route-target="plugins" data-active="false" aria-label="Плагины" title="Плагины" class="route-icon no-drag active:scale-95 flex flex-col items-center justify-center gap-1 w-14 h-14 rounded-3xl transition border border-zinc-600/30">
            <span class="sr-only">Плагины</span>
          </button>
          <div class="flex-grow"></div>
          <!--Настройки-->
          <button id="nav-go-settings" type="button" data-route-target="settings" data-active="false" aria-label="Настройки" title="Настройки" class="route-icon no-drag active:scale-95 flex flex-col items-center justify-center gap-1 w-14 h-14 rounded-3xl transition border border-zinc-600/30">
            <span class="sr-only">Настройки</span>
          </button>
        </nav>

        <div class="relative min-w-0 h-full min-h-0 overflow-hidden">
          <div id="page-chat" data-route-page="chat" class="route-page grid h-full min-h-0 grid-cols-1 overflow-hidden xl:grid-cols-[290px_minmax(0,1fr)] 2xl:grid-cols-[290px_minmax(0,1fr)_360px] xl:divide-x xl:divide-zinc-600/30"></div>

          <div id="page-plugins" data-route-page="plugins" class="route-page hidden h-full min-h-0 grid grid-cols-1 overflow-hidden xl:grid-cols-[290px_minmax(0,1fr)] xl:divide-x xl:divide-zinc-600/30"></div>

          <div id="page-models" data-route-page="models" class="route-page hidden h-full min-h-0 grid grid-cols-1 overflow-hidden xl:grid-cols-[290px_minmax(0,1fr)] xl:divide-x xl:divide-zinc-600/30"></div>

          <div id="page-settings" data-route-page="settings" class="route-page hidden h-full min-h-0 grid grid-cols-1 overflow-hidden xl:grid-cols-[290px_minmax(0,1fr)] xl:divide-x xl:divide-zinc-600/30"></div>
        </div>
      </div>
    </div>

    <div id="panel-backdrop" aria-hidden="true" class="fixed top-10 inset-x-0 bottom-0 z-30 bg-zinc-950/60 opacity-0 pointer-events-none backdrop-blur-md transition-opacity duration-200 2xl:hidden"></div>
    <div id="context-menu" class="context-menu hidden" role="menu" aria-hidden="true"></div>
    <div id="action-dialog-overlay" class="action-dialog-overlay hidden" aria-hidden="true">
      <section id="action-dialog" class="action-dialog" role="dialog" aria-modal="true" aria-labelledby="action-dialog-title" aria-describedby="action-dialog-message">
        <h2 id="action-dialog-title" class="action-dialog__title">Подтверждение</h2>
        <p id="action-dialog-message" class="action-dialog__message">Подтвердите действие.</p>
        <label id="action-dialog-input-wrap" class="action-dialog__input-wrap hidden">
          <span class="sr-only">Поле ввода</span>
          <input id="action-dialog-input" type="text" class="action-dialog__input" autocomplete="off"/>
        </label>
        <div class="action-dialog__actions">
          <button id="action-dialog-cancel" type="button" class="icon-button active:scale-95 rounded-full border border-zinc-600/30 bg-zinc-900/70 px-4 py-2 text-xs text-zinc-200 transition hover:bg-zinc-700/80">
            Отмена
          </button>
          <button id="action-dialog-confirm" type="button" class="icon-button active:scale-95 rounded-full border border-zinc-500/30 bg-zinc-100 px-4 py-2 text-xs font-semibold text-zinc-950 transition hover:bg-zinc-200">
            Подтвердить
          </button>
        </div>
      </section>
    </div>
    <div id="onboarding-overlay" class="onboarding-overlay bg-black/50 backdrop-blur-2xl" aria-hidden="true">
      <section class="onboarding-shell" role="dialog" aria-modal="true" aria-labelledby="onboarding-title" aria-describedby="onboarding-subtitle">
        <form id="onboarding-form" class="flex w-full flex-col items-center justify-center gap-0">

          <!-- Шаг 0: Добро пожаловать -->
          <article data-onboarding-step="0" class="onboarding-step flex flex-col items-center justify-center gap-7 py-10 text-center" aria-hidden="false">
            <img src="/ancia.png" alt="Логотип Ancia" class="h-24 w-24 rounded-[24px] border border-zinc-500/40 object-cover shadow-[0_12px_36px_rgb(2_6_23/0.35)]"/>
            <div class="flex flex-col items-center gap-3">
              <h2 id="onboarding-title" class="text-2xl font-semibold tracking-tight text-zinc-100">Добро пожаловать</h2>
              <p id="onboarding-subtitle" class="text-sm text-zinc-400">Ancia Local — ваши максимальные возможности</p>
            </div>
            <button type="button" data-onboarding-next-step="1" class="inline-flex items-center justify-center active:scale-95 rounded-full border border-zinc-500/30 bg-zinc-100 px-6 py-2.5 text-sm font-semibold text-zinc-950 transition hover:bg-zinc-200">
              Дальше
            </button>
          </article>

          <!-- Шаг 1: Приватность -->
          <article data-onboarding-step="1" class="onboarding-step hidden flex flex-col items-center justify-center gap-7 py-10 text-center" aria-hidden="true">
            <div class="grid h-[88px] w-[88px] shrink-0 place-items-center rounded-3xl border border-emerald-400/20 bg-emerald-400/10 text-emerald-300">
              <svg viewBox="0 0 24 24" fill="none" class="h-11 w-11">
                <path d="M12 3l7 3v5c0 5-3.5 8.5-7 10-3.5-1.5-7-5-7-10V6l7-3z" stroke="currentColor" stroke-width="1.7" stroke-linejoin="round"/>
                <path d="M9 12.2l2.1 2.1 4-4.3" stroke="currentColor" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <div class="flex flex-col items-center gap-3">
              <h2 class="text-2xl font-semibold tracking-tight text-zinc-100">Полная приватность</h2>
              <p class="text-sm leading-relaxed text-zinc-400">Данные обрабатываются локально<br>и не покидают контур ZeniEnclave.</p>
            </div>
            <button type="button" data-onboarding-next-step="2" class="inline-flex items-center justify-center active:scale-95 rounded-full border border-zinc-500/30 bg-zinc-100 px-6 py-2.5 text-sm font-semibold text-zinc-950 transition hover:bg-zinc-200">
              Дальше
            </button>
          </article>

          <!-- Шаг 2: Плагины -->
          <article data-onboarding-step="2" class="onboarding-step hidden flex flex-col items-center justify-center gap-7 py-10 text-center" aria-hidden="true">
            <div class="grid h-[88px] w-[88px] shrink-0 place-items-center rounded-3xl border border-sky-400/20 bg-sky-400/10 text-sky-300">
              <svg viewBox="0 0 24 24" fill="none" class="h-11 w-11">
                <rect x="3" y="3" width="7" height="7" rx="2" stroke="currentColor" stroke-width="1.7"/>
                <rect x="14" y="3" width="7" height="7" rx="2" stroke="currentColor" stroke-width="1.7"/>
                <rect x="3" y="14" width="7" height="7" rx="2" stroke="currentColor" stroke-width="1.7"/>
                <path d="M17.5 14v6M14.5 17h6" stroke="currentColor" stroke-width="1.7" stroke-linecap="round"/>
              </svg>
            </div>
            <div class="flex flex-col items-center gap-3">
              <h2 class="text-2xl font-semibold tracking-tight text-zinc-100">Расширяемость</h2>
              <p class="text-sm leading-relaxed text-zinc-400">Подключайте плагины, инструменты<br>и интеграции без единой строки кода.</p>
            </div>
            <button type="button" data-onboarding-next-step="3" class="inline-flex items-center justify-center active:scale-95 rounded-full border border-zinc-500/30 bg-zinc-100 px-6 py-2.5 text-sm font-semibold text-zinc-950 transition hover:bg-zinc-200">
              Дальше
            </button>
          </article>

          <!-- Шаг 3: Настройки -->
          <article data-onboarding-step="3" class="onboarding-step hidden flex flex-col items-center gap-7 py-10 text-center" aria-hidden="true">
            <div class="grid h-[88px] w-[88px] shrink-0 place-items-center rounded-3xl border border-violet-400/20 bg-violet-400/10 text-violet-300">
              <svg viewBox="0 0 24 24" fill="none" class="h-11 w-11">
                <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="1.7"/>
                <path d="M19.1 12.9a1 1 0 0 0 .2 1.1l.1.1a1.4 1.4 0 0 1-2 2l-.1-.1a1 1 0 0 0-1.1-.2 1 1 0 0 0-.6.9v.1a1.4 1.4 0 0 1-2.8 0v-.1a1 1 0 0 0-.7-.9 1 1 0 0 0-1.1.2l-.1.1a1.4 1.4 0 0 1-2-2l.1-.1a1 1 0 0 0 .2-1.1 1 1 0 0 0-.9-.6H8a1.4 1.4 0 0 1 0-2.8h.1a1 1 0 0 0 .9-.7 1 1 0 0 0-.2-1.1l-.1-.1a1.4 1.4 0 0 1 2-2l.1.1a1 1 0 0 0 1.1.2h.1a1 1 0 0 0 .6-.9V8a1.4 1.4 0 0 1 2.8 0v.1a1 1 0 0 0 .6.9 1 1 0 0 0 1.1-.2l.1-.1a1.4 1.4 0 0 1 2 2l-.1.1a1 1 0 0 0-.2 1.1v.1a1 1 0 0 0 .9.6h.1a1.4 1.4 0 0 1 0 2.8h-.1a1 1 0 0 0-.9.6z" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <div class="flex flex-col items-center gap-3">
              <h2 class="text-2xl font-semibold tracking-tight text-zinc-100">Пара штрихов</h2>
              <p class="text-sm leading-relaxed text-zinc-400">Настройте под себя — займёт меньше минуты.</p>
            </div>
            <div class="w-full max-w-[320px] space-y-3 text-left">
              <label class="block space-y-1.5">
                <span class="text-[11px] uppercase tracking-[0.14em] text-zinc-500">Как к вам обращаться</span>
                <input id="onboarding-user-name" type="text" autocomplete="name" placeholder="Имя" class="w-full rounded-full border border-zinc-700/60 bg-zinc-900/70 px-4 py-2 text-sm text-zinc-100 placeholder:text-zinc-600 outline-none focus:border-zinc-500/70"/>
              </label>
              <label class="inline-flex cursor-pointer items-center gap-3.5 text-sm text-zinc-300">
                <input id="onboarding-ui-animations" type="checkbox" class="h-4 w-4 rounded border-zinc-600/50 bg-zinc-900/65 accent-violet-400" />
                Плавные анимации
              </label>
            </div>
            <button id="onboarding-finish" type="submit" class="inline-flex items-center justify-center active:scale-95 rounded-full border border-zinc-500/30 bg-zinc-100 px-6 py-2.5 text-sm font-semibold text-zinc-950 transition hover:bg-zinc-200">
              Начать работу
            </button>
          </article>

        </form>

        <div class="flex items-center justify-center gap-1.5 mt-6" aria-hidden="true">
          <span class="onboarding-dot" data-onboarding-dot="0"></span>
          <span class="onboarding-dot" data-onboarding-dot="1"></span>
          <span class="onboarding-dot" data-onboarding-dot="2"></span>
          <span class="onboarding-dot" data-onboarding-dot="3"></span>
        </div>
      </section>
    </div>
    <div id="link-overlay" class="link-overlay hidden" aria-hidden="true">
      <div class="link-overlay__header">
        <span id="link-overlay-url" class="link-overlay__url"></span>
        <div class="link-overlay__actions">
          <button id="link-overlay-open" type="button" class="link-overlay__btn-browser">
            <svg viewBox="0 0 20 20" fill="none" width="14" height="14" aria-hidden="true">
              <path d="M7 3H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-3M10 10l7-7M13 3h4v4" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Открыть в браузере
          </button>
          <button id="link-overlay-close" type="button" class="link-overlay__btn-close" aria-label="Закрыть">
            <svg viewBox="0 0 20 20" fill="none" width="16" height="16" aria-hidden="true">
              <path d="M5 5l10 10M15 5L5 15" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
            </svg>
          </button>
        </div>
      </div>
      <div id="link-overlay-fallback" class="link-overlay__fallback hidden">
        <svg viewBox="0 0 48 48" fill="none" width="44" height="44" aria-hidden="true">
          <circle cx="24" cy="24" r="20" stroke="currentColor" stroke-width="2" opacity="0.3"/>
          <path d="M24 14v12M24 32v2" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"/>
          <path d="M8 8l32 32" stroke="currentColor" stroke-width="2" stroke-linecap="round" opacity="0.4"/>
        </svg>
        <p class="link-overlay__fallback-text">Сайт не поддерживает встроенный просмотр</p>
        <p class="link-overlay__fallback-sub">Страница запрещает загрузку в iframe (X-Frame-Options)</p>
        <button id="link-overlay-fallback-btn" type="button" class="link-overlay__btn-browser">
          <svg viewBox="0 0 20 20" fill="none" width="14" height="14" aria-hidden="true">
            <path d="M7 3H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-3M10 10l7-7M13 3h4v4" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          Открыть в браузере
        </button>
      </div>
      <iframe id="link-overlay-frame" class="link-overlay__frame" sandbox="allow-scripts allow-same-origin allow-forms allow-popups" title="Просмотр ссылки"></iframe>
    </div>

    <div id="model-params-modal" class="model-params-modal hidden" aria-hidden="true">
      <div class="model-params-modal__backdrop"></div>
      <section class="model-params-modal__panel" role="dialog" aria-modal="true" aria-labelledby="mpm-title">
        <header class="model-params-modal__header">
          <h2 id="mpm-title" class="model-params-modal__title">Параметры модели</h2>
          <button id="model-params-modal-close" type="button" class="model-params-modal__close" aria-label="Закрыть">
            <svg viewBox="0 0 20 20" fill="none" width="16" height="16" aria-hidden="true">
              <path d="M5 5l10 10M15 5L5 15" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
            </svg>
          </button>
        </header>
        <div id="model-params-modal-body" class="model-params-modal__body"></div>
        <footer class="model-params-modal__footer">
          <button id="model-params-modal-cancel" type="button" class="icon-button active:scale-95 rounded-full border border-zinc-600/30 bg-zinc-900/70 px-4 py-2 text-xs text-zinc-200 transition hover:bg-zinc-700/80">Отмена</button>
          <button id="model-params-modal-save" type="button" class="icon-button active:scale-95 rounded-full border border-zinc-500/30 bg-zinc-100 px-4 py-2 text-xs font-semibold text-zinc-950 transition hover:bg-zinc-200">Применить</button>
        </footer>
      </section>
    </div>

    <div id="ui-toast-region" class="toast-region" aria-live="polite" aria-relevant="additions text"></div>

    <script type="module" src="/src/main.js"></script>
  </body>
</html>
