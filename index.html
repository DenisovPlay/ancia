<!doctype html>
<html lang="ru">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ancia Local</title>
  <style>
    html,
    body {
      margin: 0;
      width: 100%;
      height: 100%;
      background: #09090b;
      color-scheme: dark;
    }

    body {
      overflow: hidden;
      color: #e4e4e7;
    }

    #app-preloader {
      position: fixed;
      inset: 0;
      z-index: 9999;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 12px;
      background: #09090b;
      opacity: 1;
      visibility: visible;
      transition: opacity 220ms ease, visibility 220ms ease;
    }

    body.app-ready #app-preloader {
      opacity: 0;
      visibility: hidden;
      pointer-events: none;
    }

    #app-preloader .app-preloader__brand {
      margin: 4px 0 2px;
      font-size: 13px;
      letter-spacing: 0.28em;
      font-weight: 700;
      color: rgb(244 244 245 / 0.9);
    }

    #app-preloader .app-preloader__label {
      margin: 0;
      font-size: 11px;
      letter-spacing: 0.09em;
      color: rgb(161 161 170);
    }

    #app-preloader .app-preloader__progress-track {
      position: relative;
      width: min(320px, 72vw);
      height: 4px;
      border-radius: 999px;
      background: rgb(148 163 184 / 0.2);
      overflow: hidden;
    }

    #app-preloader .app-preloader__progress-fill {
      width: 34%;
      height: 100%;
      border-radius: inherit;
      background: rgb(212 212 216 / 0.6);
      transition: width 260ms cubic-bezier(0.22, 1, 0.36, 1);
    }

    #app-preloader .app-preloader__progress-fill[data-mode="indeterminate"] {
      animation: critical-loader-indeterminate 1.15s ease-in-out infinite;
    }

    @keyframes critical-loader-spin {
      to {
        transform: rotate(360deg);
      }
    }

    @keyframes critical-loader-indeterminate {
      0% {
        width: 22%;
        transform: translateX(-110%);
      }

      60% {
        width: 56%;
        transform: translateX(42%);
      }

      100% {
        width: 28%;
        transform: translateX(220%);
      }
    }
  </style>
</head>

<body class="min-h-screen bg-zinc-950 text-zinc-100 antialiased">
  <canvas id="liquid-canvas" aria-hidden="true"></canvas>
  <div class="noise-layer" aria-hidden="true"></div>
  <div id="app-preloader" class="app-preloader" aria-live="polite">
    <p class="app-preloader__brand" aria-hidden="true">Пару секунд</p>
    <p class="app-preloader__label">Загрузка интерфейса...</p>
    <div class="app-preloader__progress-track" aria-hidden="true">
      <div id="app-preloader-progress" class="app-preloader__progress-fill" data-mode="indeterminate"></div>
    </div>
    <button id="app-preloader-retry"
      class="hidden mt-4 rounded border border-zinc-600/30 px-4 py-2 text-xs font-semibold text-zinc-100 hover:bg-zinc-800 transition">Повторить
      попытку</button>
  </div>

  <div id="app-shell" class="relative h-screen overflow-hidden">
    <header id="titlebar" data-tauri-drag-region
      class="border-b border-zinc-800/60 bg-zinc-950/80 backdrop-blur-sm drag-region mx-auto flex h-10 w-full max-w-[1780px] items-center px-3">
      <div class="titlebar-left flex min-w-0 items-center">
        <div class="min-w-0">
          <p class="truncate text-[11px] uppercase tracking-[0.12em] text-zinc-500">Ancia Local</p>
        </div>
      </div>
    </header>

    <div
      class="mx-auto grid h-[calc(100vh-2.5rem)] w-full max-w-[1780px] grid-cols-[64px_minmax(0,1fr)] divide-x divide-zinc-800/50">
      <nav class="bg-zinc-950/60 backdrop-blur-sm flex flex-col items-center gap-1 py-2.5 px-1"
        aria-label="Основная навигация">
        <button id="nav-go-chat" type="button" data-route-target="chat" data-active="true" aria-label="Чаты"
          title="Чаты"
          class="route-icon no-drag active:scale-95 flex flex-col items-center justify-center gap-0.5 w-12 h-12 rounded-lg transition border border-transparent">
        </button>
        <button id="nav-go-models" type="button" data-route-target="models" data-active="false" aria-label="Модели"
          title="Модели"
          class="route-icon no-drag active:scale-95 flex flex-col items-center justify-center gap-0.5 w-12 h-12 rounded-lg transition border border-transparent">
        </button>
        <button id="nav-go-plugins" type="button" data-route-target="plugins" data-active="false" aria-label="Плагины"
          title="Плагины"
          class="route-icon no-drag active:scale-95 flex flex-col items-center justify-center gap-0.5 w-12 h-12 rounded-lg transition border border-transparent">
        </button>
        <div class="flex-grow"></div>
        <button id="nav-go-settings" type="button" data-route-target="settings" data-active="false"
          aria-label="Настройки" title="Настройки"
          class="route-icon no-drag active:scale-95 flex flex-col items-center justify-center gap-0.5 w-12 h-12 rounded-lg transition border border-transparent">
        </button>
      </nav>

      <div class="relative min-w-0 h-full min-h-0 overflow-hidden">
        <div id="page-chat" data-route-page="chat"
          class="route-page grid h-full min-h-0 grid-cols-1 overflow-hidden xl:grid-cols-[260px_minmax(0,1fr)] 2xl:grid-cols-[260px_minmax(0,1fr)_320px] xl:divide-x xl:divide-zinc-800/50">
        </div>

        <div id="page-plugins" data-route-page="plugins"
          class="route-page hidden h-full min-h-0 grid grid-cols-1 overflow-hidden xl:grid-cols-[260px_minmax(0,1fr)] xl:divide-x xl:divide-zinc-800/50">
        </div>

        <div id="page-models" data-route-page="models"
          class="route-page hidden h-full min-h-0 grid grid-cols-1 overflow-hidden xl:grid-cols-[260px_minmax(0,1fr)] xl:divide-x xl:divide-zinc-800/50">
        </div>

        <div id="page-settings" data-route-page="settings"
          class="route-page hidden h-full min-h-0 grid grid-cols-1 overflow-hidden xl:grid-cols-[260px_minmax(0,1fr)] xl:divide-x xl:divide-zinc-800/50">
        </div>
      </div>
    </div>
  </div>

  <div id="panel-backdrop" aria-hidden="true"
    class="fixed top-10 inset-x-0 bottom-0 z-30 bg-black/50 opacity-0 pointer-events-none backdrop-blur-sm transition-opacity duration-200 2xl:hidden">
  </div>
  <div id="context-menu" class="context-menu hidden" role="menu" aria-hidden="true"></div>
  <div id="action-dialog-overlay" class="app-modal-overlay action-dialog-overlay hidden" aria-hidden="true">
    <section id="action-dialog" class="action-dialog" role="dialog" aria-modal="true"
      aria-labelledby="action-dialog-title" aria-describedby="action-dialog-message">
      <h2 id="action-dialog-title" class="action-dialog__title">Подтверждение</h2>
      <p id="action-dialog-message" class="action-dialog__message">Подтвердите действие.</p>
      <label id="action-dialog-input-wrap" class="action-dialog__input-wrap hidden">
        <span class="sr-only">Поле ввода</span>
        <input id="action-dialog-input" type="text" class="action-dialog__input" autocomplete="off" />
      </label>
      <div class="action-dialog__actions">
        <button id="action-dialog-cancel" type="button"
          class="icon-button active:scale-95 rounded-lg border border-zinc-700 bg-zinc-900 px-3 py-1.5 text-xs text-zinc-300 transition hover:bg-zinc-800">
          Отмена
        </button>
        <button id="action-dialog-confirm" type="button"
          class="icon-button active:scale-95 rounded-lg border border-zinc-600 bg-zinc-100 px-3 py-1.5 text-xs font-medium text-zinc-950 transition hover:bg-zinc-200">
          Подтвердить
        </button>
      </div>
    </section>
  </div>
  <div id="onboarding-overlay" class="onboarding-overlay bg-black/50 backdrop-blur-2xl" aria-hidden="true" hidden>
    <section class="onboarding-shell" role="dialog" aria-modal="true" aria-labelledby="onboarding-title"
      aria-describedby="onboarding-subtitle">
      <form id="onboarding-form" class="flex w-full flex-col items-center justify-center gap-0">

        <!-- Шаг 0: Добро пожаловать -->
        <article data-onboarding-step="0"
          class="onboarding-step flex flex-col items-center justify-center gap-7 py-10 text-center" aria-hidden="false">
          <img src="/ancia.png" alt="Логотип Ancia"
            class="h-24 w-24 rounded-[24px] border border-zinc-500/40 object-cover shadow-[0_12px_36px_rgb(2_6_23/0.35)]" />
          <div class="flex flex-col items-center gap-3">
            <h2 id="onboarding-title" class="text-2xl font-semibold tracking-tight text-zinc-100">Добро пожаловать</h2>
            <p id="onboarding-subtitle" class="text-sm text-zinc-400">Ancia Local — ваши максимальные возможности</p>
          </div>
          <button type="button" data-onboarding-next-step="1"
            class="inline-flex items-center justify-center active:scale-95 rounded-lg border border-zinc-600 bg-zinc-100 px-5 py-2 text-sm font-medium text-zinc-950 transition hover:bg-zinc-200">
            Дальше
          </button>
        </article>

        <!-- Шаг 1: Приватность -->
        <article data-onboarding-step="1"
          class="onboarding-step hidden flex flex-col items-center justify-center gap-7 py-10 text-center"
          aria-hidden="true">
          <div class="grid h-16 w-16 shrink-0 place-items-center rounded-xl border border-emerald-900/40 bg-emerald-950/40 text-emerald-400">
            <span data-icon="shield-check" data-icon-class="ui-icon-xl"></span>
          </div>
          <div class="flex flex-col items-center gap-3">
            <h2 class="text-2xl font-semibold tracking-tight text-zinc-100">Полная приватность</h2>
            <p class="text-sm leading-relaxed text-zinc-400">Данные обрабатываются локально<br>и не покидают контур
              ZeniEnclave.</p>
          </div>
          <button type="button" data-onboarding-next-step="2"
            class="inline-flex items-center justify-center active:scale-95 rounded-lg border border-zinc-600 bg-zinc-100 px-5 py-2 text-sm font-medium text-zinc-950 transition hover:bg-zinc-200">
            Дальше
          </button>
        </article>

        <!-- Шаг 2: Плагины -->
        <article data-onboarding-step="2"
          class="onboarding-step hidden flex flex-col items-center justify-center gap-7 py-10 text-center"
          aria-hidden="true">
          <div class="grid h-16 w-16 shrink-0 place-items-center rounded-xl border border-sky-900/40 bg-sky-950/40 text-sky-400">
            <span data-icon="plugins" data-icon-class="ui-icon-xl"></span>
          </div>
          <div class="flex flex-col items-center gap-3">
            <h2 class="text-2xl font-semibold tracking-tight text-zinc-100">Расширяемость</h2>
            <p class="text-sm leading-relaxed text-zinc-400">Подключайте плагины, инструменты<br>и интеграции без единой
              строки кода.</p>
          </div>
          <button type="button" data-onboarding-next-step="3"
            class="inline-flex items-center justify-center active:scale-95 rounded-lg border border-zinc-600 bg-zinc-100 px-5 py-2 text-sm font-medium text-zinc-950 transition hover:bg-zinc-200">
            Дальше
          </button>
        </article>

        <!-- Шаг 3: Настройки -->
        <article data-onboarding-step="3"
          class="onboarding-step hidden flex flex-col items-center gap-7 py-10 text-center" aria-hidden="true">
          <div class="grid h-16 w-16 shrink-0 place-items-center rounded-xl border border-violet-900/40 bg-violet-950/40 text-violet-400">
            <span data-icon="sliders" data-icon-class="ui-icon-xl"></span>
          </div>
          <div class="flex flex-col items-center gap-3">
            <h2 class="text-2xl font-semibold tracking-tight text-zinc-100">Пара штрихов</h2>
            <p class="text-sm leading-relaxed text-zinc-400">Настройте под себя — займёт меньше минуты.</p>
          </div>
          <div class="w-full max-w-[320px] space-y-3 text-left">
            <label class="block space-y-1.5">
              <span class="text-[11px] uppercase tracking-[0.14em] text-zinc-500">Как к вам обращаться?</span>
              <input id="onboarding-user-name" type="text" autocomplete="name" placeholder="Имя"
                class="w-full rounded-lg border border-zinc-700 bg-zinc-900 px-3 py-2 text-sm text-zinc-100 placeholder:text-zinc-600 outline-none focus:border-zinc-500" />
            </label>
            <label class="inline-flex cursor-pointer items-center gap-3.5 text-sm text-zinc-300">
              <input id="onboarding-ui-animations" type="checkbox"
                class="h-4 w-4 rounded border-zinc-700 bg-zinc-900 accent-zinc-400" />
              Плавные анимации
            </label>
          </div>
          <button id="onboarding-finish" type="submit"
            class="inline-flex items-center justify-center active:scale-95 rounded-lg border border-zinc-600 bg-zinc-100 px-5 py-2 text-sm font-medium text-zinc-950 transition hover:bg-zinc-200">
            Начать работу
          </button>
        </article>

      </form>

      <div class="flex items-center justify-center gap-1.5 mt-6" aria-hidden="true">
        <span class="onboarding-dot" data-onboarding-dot="0"></span>
        <span class="onboarding-dot" data-onboarding-dot="1"></span>
        <span class="onboarding-dot" data-onboarding-dot="2"></span>
        <span class="onboarding-dot" data-onboarding-dot="3"></span>
      </div>
    </section>
  </div>
  <div id="link-overlay" class="link-overlay hidden" aria-hidden="true">
    <div class="link-overlay__header">
      <span id="link-overlay-url" class="link-overlay__url"></span>
      <div class="link-overlay__actions">
        <button id="link-overlay-open" type="button" class="link-overlay__btn-browser">
          <svg viewBox="0 0 20 20" fill="none" width="14" height="14" aria-hidden="true">
            <path d="M7 3H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-3M10 10l7-7M13 3h4v4" stroke="currentColor"
              stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
          Открыть в браузере
        </button>
        <button id="link-overlay-close" type="button" class="link-overlay__btn-close" aria-label="Закрыть">
          <svg viewBox="0 0 20 20" fill="none" width="16" height="16" aria-hidden="true">
            <path d="M5 5l10 10M15 5L5 15" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" />
          </svg>
        </button>
      </div>
    </div>
    <div id="link-overlay-fallback" class="link-overlay__fallback hidden">
      <svg viewBox="0 0 48 48" fill="none" width="44" height="44" aria-hidden="true">
        <circle cx="24" cy="24" r="20" stroke="currentColor" stroke-width="2" opacity="0.3" />
        <path d="M24 14v12M24 32v2" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" />
        <path d="M8 8l32 32" stroke="currentColor" stroke-width="2" stroke-linecap="round" opacity="0.4" />
      </svg>
      <p class="link-overlay__fallback-text">Сайт не поддерживает встроенный просмотр</p>
      <p class="link-overlay__fallback-sub">Страница запрещает загрузку в iframe (X-Frame-Options)</p>
      <button id="link-overlay-fallback-btn" type="button" class="link-overlay__btn-browser">
        <svg viewBox="0 0 20 20" fill="none" width="14" height="14" aria-hidden="true">
          <path d="M7 3H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-3M10 10l7-7M13 3h4v4" stroke="currentColor"
            stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
        Открыть в браузере
      </button>
    </div>
    <iframe id="link-overlay-frame" class="link-overlay__frame"
      sandbox="allow-scripts allow-same-origin allow-forms allow-popups" title="Просмотр ссылки"></iframe>
  </div>

  <div id="model-params-modal" class="app-modal-overlay model-params-modal hidden" aria-hidden="true">
    <section class="model-params-modal__panel" role="dialog" aria-modal="true" aria-labelledby="mpm-title">
      <header class="flex items-center gap-2 px-4 py-3.5 border-b border-zinc-800/40 shrink-0">
        <h2 id="mpm-title" class="flex-1 min-w-0 m-0 text-[13px] font-semibold text-zinc-100 truncate">Параметры модели</h2>
        <button id="model-params-modal-close" type="button"
          class="grid place-items-center w-7 h-7 shrink-0 rounded-md border border-zinc-700 bg-transparent text-zinc-500 cursor-pointer transition hover:bg-zinc-700/50 hover:text-zinc-300"
          aria-label="Закрыть">
          <svg viewBox="0 0 20 20" fill="none" width="15" height="15" aria-hidden="true">
            <path d="M5 5l10 10M15 5L5 15" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" />
          </svg>
        </button>
      </header>
      <div id="model-params-modal-body" class="flex-1 overflow-y-auto p-4"></div>
      <footer class="flex items-center justify-end gap-2 px-4 py-3 border-t border-zinc-800/40 shrink-0">
        <button id="model-params-modal-cancel" type="button"
          class="active:scale-95 rounded-lg border border-zinc-700 bg-zinc-900 px-3 py-1.5 text-xs text-zinc-300 transition hover:bg-zinc-800">Отмена</button>
        <button id="model-params-modal-save" type="button"
          class="active:scale-95 rounded-lg border border-zinc-600 bg-zinc-100 px-3 py-1.5 text-xs font-medium text-zinc-950 transition hover:bg-zinc-200">Применить</button>
      </footer>
    </section>
  </div>

  <div id="ui-toast-region" class="toast-region" aria-live="polite" aria-relevant="additions text"></div>

  <script type="module" src="/src/main.js"></script>
</body>

</html>
